(this["webpackJsonpdiscord-clone"]=this["webpackJsonpdiscord-clone"]||[]).push([[0],{80:function(e,n,c){},81:function(e,n,c){},82:function(e,n,c){},85:function(e,n,c){},86:function(e,n,c){},91:function(e,n,c){},92:function(e,n,c){},93:function(e,n,c){},94:function(e,n,c){},95:function(e,n,c){},96:function(e,n,c){},97:function(e,n,c){},98:function(e,n,c){"use strict";c.r(n);var a=c(2),t=c(12),s=c.n(t),i=c(18),r=c(34),l=Object(r.b)({name:"user",initialState:{user:null},reducers:{login:function(e,n){e.user=n.payload},logout:function(e){e.user=null}}}),o=l.actions,d=o.login,j=o.logout,u=function(e){return e.user.user},h=l.reducer,b=Object(r.b)({name:"app",initialState:{channelId:null,channelName:null},reducers:{setChannelInfo:function(e,n){e.channelId=n.payload.channelId,e.channelName=n.payload.channelName}}}),m=b.actions.setChannelInfo,O=function(e){return e.app.channelId},p=function(e){return e.app.channelName},f=b.reducer,x=c(21),v=Object(x.b)({user:h,app:f}),g=Object(r.a)({reducer:v}),N=(c(80),c(24)),_=(c(81),c(82),c(48)),C=c.n(_),I=c(4);var S=function(){return Object(I.jsxs)("div",{className:"sidebar__header",children:[Object(I.jsx)("h3",{children:"Server Name"}),Object(I.jsx)(C.a,{})]})},y=c(60),k=c.n(y);c(85),c(86);var E=function(e){var n=Object(i.b)();return Object(I.jsx)("div",{className:"sidebarChannels",onClick:function(){n(m({channelId:e.id,channelName:e.name})),e.onClose&&e.onClose()},children:Object(I.jsxs)("h4",{children:[Object(I.jsx)("span",{className:"sidebarChannel__hash",children:"#"}),e.name]})})},H=c(42),P=H.a.initializeApp({apiKey:"AIzaSyDuGGZIE3TzFO16nZFlUyljhPWmcPuKk9g",authDomain:"discord-clone-7bc40.firebaseapp.com",projectId:"discord-clone-7bc40",storageBucket:"discord-clone-7bc40.appspot.com",messagingSenderId:"421129527143",appId:"1:421129527143:web:7ae9ba6dd9ea53c11659c2",measurementId:"G-EVJ7T81YPJ"}),w=P.firestore(),M=P.auth(),D=new H.a.auth.GoogleAuthProvider,T=w;var A=function(e){Object(i.c)(u);var n=Object(a.useState)([]),c=Object(N.a)(n,2),t=c[0],s=c[1];return Object(a.useEffect)((function(){T.collection("channels").onSnapshot((function(e){return s(e.docs.map((function(e){return{id:e.id,channel:e.data()}})))}))}),[]),Object(I.jsxs)("div",{className:"sidebar__channels",children:[Object(I.jsxs)("div",{className:"sidebar__channelsHeader",children:[Object(I.jsxs)("div",{className:"sidebar__channelsHeaderType",children:[Object(I.jsx)(C.a,{}),Object(I.jsx)("h3",{children:"Text Channels"})]}),Object(I.jsx)("div",{className:"sidebar__addchannel",title:"click here to add channel",children:Object(I.jsx)(k.a,{onClick:function(){var e=prompt("Enter a new channel name");e&&T.collection("channels").add({channelName:e})}})})]}),Object(I.jsx)("div",{className:"sidebar__channelList",children:t.map((function(n){var c=n.id,a=n.channel;return Object(I.jsx)(E,{name:a.channelName,id:c,onClose:e.onClose},c)}))})]})},F=c(125);c(91);var G=function(){var e=Object(i.c)(u);return Object(I.jsxs)("div",{className:"sidebar__profile",children:[Object(I.jsx)(F.a,{src:e.photo,onClick:function(){return M.signOut()},title:"Click here to log out"}),Object(I.jsxs)("div",{className:"sidebar__profileInfo",children:[Object(I.jsx)("h3",{children:e.displayName}),Object(I.jsxs)("p",{children:["@",e.uid]})]})]})};var J=function(e){return Object(I.jsxs)("div",{className:"sidebar "+(e.open?"display__flex":""),children:[Object(I.jsx)(S,{}),Object(I.jsx)(A,{onClose:e.onClose}),Object(I.jsx)(G,{})]})},z=(c(92),c(93),c(62)),B=c.n(z),K=c(63),L=c.n(K),U=c(64),V=c.n(U),W=c(66),Z=c.n(W),R=c(65),Y=c.n(R),q=c(61),Q=c.n(q);var X=function(e){return Object(I.jsxs)("div",{className:"chatHeader",children:[Object(I.jsxs)("div",{className:"chatHeader__left",children:[Object(I.jsx)(Q.a,{onClick:e.openMenu}),Object(I.jsxs)("h3",{children:[Object(I.jsx)("p",{className:"chatHeader__hash",children:"#"}),e.channelName]})]}),Object(I.jsxs)("div",{className:"chatHeader__right",children:[Object(I.jsx)(B.a,{}),Object(I.jsx)(L.a,{}),Object(I.jsx)(V.a,{}),Object(I.jsxs)("div",{className:"chatHeader__search",children:[Object(I.jsx)("input",{type:"text",placeholder:"Search"}),Object(I.jsx)(Y.a,{})]}),Object(I.jsx)(Z.a,{})]})]})};c(94);var $=function(e){return Object(I.jsxs)("div",{className:"message",children:[Object(I.jsx)(F.a,{src:e.user.photo}),Object(I.jsxs)("div",{className:"message__info",children:[Object(I.jsxs)("h4",{children:[e.user.displayName,Object(I.jsx)("span",{className:"message__timestamp",children:new Date(1e3*e.time.seconds).toISOString()})]}),Object(I.jsx)("p",{children:e.message})]})]})},ee=(c(95),c(67)),ne=c.n(ee);var ce=function(e){return Object(I.jsxs)("div",{className:"chat__input",children:[Object(I.jsx)(ne.a,{}),Object(I.jsxs)("form",{children:[Object(I.jsx)("input",{disabled:!e.channelId,value:e.input,onChange:e.handleInput,placeholder:"Message #".concat(e.channelName||"")}),Object(I.jsx)("button",{className:"chatinput__submit",type:"submit",onClick:function(n){return e.send(n)},children:"Send Message"})]})]})};var ae=function(e){var n=Object(i.c)(u),c=Object(i.c)(O),t=Object(i.c)(p),s=Object(a.useState)(""),r=Object(N.a)(s,2),l=r[0],o=r[1],d=Object(a.useState)([]),j=Object(N.a)(d,2),h=j[0],b=j[1];return Object(a.useEffect)((function(){c&&T.collection("channels").doc(c).collection("message").orderBy("timestamp","desc").onSnapshot((function(e){var n=e.docs.map((function(e){return{message:e.data().message,user:e.data().user,timestamp:e.data().timestamp}}));b(n)}))}),[c]),Object(I.jsxs)("div",{className:"chat",children:[Object(I.jsx)(X,{channelName:t,openMenu:e.openMenu}),Object(I.jsx)("div",{className:"chat__messages",children:h.map((function(e){return e.timestamp&&Object(I.jsx)($,{user:e.user,time:e.timestamp,message:e.message},e.timestamp.seconds)}))}),Object(I.jsx)(ce,{input:l,handleInput:function(e){o(e.target.value)},channelId:c,channelName:t,send:function(e){e.preventDefault(),e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),T.collection("channels").doc(c).collection("message").add({message:l,user:n,timestamp:H.a.firestore.FieldValue.serverTimestamp()}),o("")}})]})},te=c(124),se=c.p+"static/media/discord.ef814e33.png";c(96);var ie=function(){return Object(I.jsxs)("div",{className:"login",children:[Object(I.jsx)("div",{className:"login__logo",children:Object(I.jsx)("img",{src:se,alt:"Discord logo"})}),Object(I.jsx)(te.a,{className:"login__btn",onClick:function(){M.signInWithPopup(D).catch((function(e){return console.log(e.message)}))},children:"Sign In"})]})},re=(c(97),c(123)),le=function(){var e=Object(i.b)(),n=Object(i.c)(u);Object(a.useEffect)((function(){M.onAuthStateChanged((function(n){e(n?d({uid:n.uid,photo:n.photoURL,email:n.email,displayName:n.displayName}):j())}))}),[e]);var c=Object(a.useState)(!1),t=Object(N.a)(c,2),s=t[0],r=t[1],l=function(){r(!s)};return Object(I.jsx)("div",{className:"app",children:n?Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)(J,{onClose:null}),Object(I.jsx)(re.a,{anchor:"left",open:s,onClose:l,children:Object(I.jsx)(J,{open:s,onClose:l})}),Object(I.jsx)(ae,{openMenu:l})]}):Object(I.jsx)(ie,{})})};s.a.render(Object(I.jsx)(i.a,{store:g,children:Object(I.jsx)(le,{})}),document.getElementById("root"))}},[[98,1,2]]]);
//# sourceMappingURL=main.ca632c3f.chunk.js.map